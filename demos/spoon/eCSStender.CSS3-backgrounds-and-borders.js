/*------------------------------------------------------------------------------
Function:       eCSStender.CSS3-backgrounds-and-borders.js
Author:         Aaron Gustafson (aaron at easy-designs dot net)
Creation Date:  2010-04-24
Version:        0.3.2
Homepage:       http://github.com/easy-designs/eCSStender.CSS3-backgrounds-and-borders.js
License:        MIT License 
Note:           If you change or improve on this script, please let us know by
                emailing the author (above) with a link to your demo page.
------------------------------------------------------------------------------*/
(function(){if(eCSStender===undefined){return}var d=eCSStender,f=new b(d),a=new c(d);function b(x){var A,y="property",r="-moz-",p="-webkit-",h="-khtml-",k=" ",j=": ",s="; ",v="border-radius",z="-topleft",l="border-top-left-radius",n="border-top-right-radius",q="border-bottom-right-radius",o="border-bottom-left-radius",t=j+"3px";x.register({fragment:"radius",test:function(){return(!x.isSupported(y,l+t)&&(x.isSupported(y,r+v+z+t)||x.isSupported(y,p+l+t)||x.isSupported(y,h+l+t)))},fingerprint:"net.easy-designs."+v},false,u);function u(e,D,C){var E=e+" { ",B;if(D[v]!=A){B=i(D[v]);if(B.length>1){E+=g(B)}else{E+=r+v+j+D[v]+s+p+v+j+D[v]+s+h+v+j+D[v]+s}D[v]=null}for(var F in D){if(x.isInheritedProperty(D,F)){continue}E+=w(D,F)}E+="} ";x.embedCSS(E,C)}function i(D){var E=D.split("/"),B=[];if(E.length>1){var F=x.trim(E[0]).split(k);var e=x.trim(E[1]).split(k);F=m(F);e=m(e);for(var C=0;C<4;C++){B[C]=F[C]+k+e[C]}}else{B=m(x.trim(E[0]).split(k))}return B}function m(e){if(e.length<4){if(e[1]==A){e[1]=e[0]}if(e[2]==A){e[2]=e[0]}if(e[3]==A){e[3]=e[1]}}return e}function g(e){if(x.isSupported(y,p+l+t)||x.isSupported(y,h+l+t)){g=function(B){return p+l+j+B[0]+s+p+n+j+B[1]+s+p+q+j+B[2]+s+p+o+j+B[3]+s+h+l+j+B[0]+s+h+n+j+B[1]+s+h+q+j+B[2]+s+h+o+j+B[3]+s}}else{g=function(B){return r+v+z+j+B[0]+s+r+v+"-topright: "+B[1]+s+r+v+"-bottomright: "+B[2]+s+r+v+"-bottomleft: "+B[3]+s}}return g(e)}function w(e,B){if(x.isSupported(y,r+v+z+t)){w=function(C,D){return D.replace(/border-(top|bottom)-(left|right)-radius/,r+v+"-$1$2")+j+C[D]+s}}else{w=function(C,D){return D+j+C[D]+s}}return w(e,B)}}function c(w){var A,y="property",p="-moz-",o="-webkit-",g="-khtml-",l=" ",k=": ",q="; ",t="box-shadow",n="filter: ",v="progid:DXImageTransform.Microsoft.Shadow",x="2px",i="rgb(0, 0, 0)",z=k+i+l+x+l+x+l+x,h=z+l+x,m=n+v+"(color=#000000,direction=135,strength=3)",u=false;w.register({property:t,test:function(){return(!w.isSupported(y,t+h)&&(w.isSupported(y,p+t+h)||w.isSupported(y,o+t+z)||w.isSupported(y,g+t+z)||w.isSupported(y,n+m)))},fingerprint:"net.easy-designs."+t},false,s);function s(B,F,I){var H=B+" { ",G=F[t],e=G.match(/((?:rgb|hsl)a?\([^\)]+\))/g),D=count=(e instanceof Array?e.length:0),C="%MASKED_COLOR",E="%";if(D){while(D--){G=G.replace(e[D],C+D+E)}}H+=j(G);D=count;if(D){while(D--){H=H.replace(C+D+E,e[D])}}H+="} ";w.embedCSS(H,I)}function j(e){if(w.isSupported(y,n+m)){j=function(J){var E=J.split(","),H="zoom: 1; "+n,F=E.length,C,I,B,G,D;while(F--){J=w.trim(E[F]).split(l);C=J.length;I=r(J[0],J[1]);B=G=null;switch(C){case 5:B=w.trim(J[2]).replace(/(\d+).*/,"$1");G=w.trim(J[3]);D=w.trim(J[4]);break;case 4:B=w.trim(J[2]).replace(/(\d+).*/,"$1");D=w.trim(J[3]);break;case 3:D=w.trim(J[2]);break}H+=v+"(color="+D+",direction="+I+",strength="+B+") "}return H+q}}else{if(w.isSupported(y,o+t+h)||w.isSupported(y,g+t+h)){u=true}j=function(J){var G=J.split(","),K=[],H=G.length,F=null,C,E,B,I,D;while(H--){J=w.trim(G[H]).split(l);C=J.length;E=J[0]+" "+J[1];B=I=F;switch(C){case 5:B=w.trim(J[2]);I=w.trim(J[3]);D=w.trim(J[4]);break;case 4:B=w.trim(J[2]);D=w.trim(J[3]);break;case 3:D=w.trim(J[2]);break}K[H]=E+l+(B!=F?B+l:"")+(u&&I!=F?I+l:"")+D}K=K.join(", ")+q;return o+t+k+K+g+t+k+K+p+t+k+K}}return j(e)}function r(e,B){return 270-(Math.atan2(B,0-e)*180/Math.PI)}}})();